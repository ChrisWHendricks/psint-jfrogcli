name: 'Setup jfrog cli for Artifactory'
description: 'Download and configure JFrog CLI'
inputs:
  url: 
    description: 'url for artifactory instance'
    required: true
    default: '${{ env.ARTIFACTORY_URL }}'
   user: 
    description: 'url for artifactory instance'
    required: true
    default: '${{ env.ARTIFACTORY_USERNAME }}'
   password: 
    description: 'url for artifactory instance'
    required: true
    default: '${{ env.ARTIFACTORY_PASSWORD }}'
#outputs:
#  random-number:
#    description: "Random number"
#    value: ${{ steps.random-number-generator.outputs.random-id }}
runs:
  using: "composite"
  steps:
   - name: Setup JFrog CLI
     uses: jfrog/setup-jfrog-cli@v2
     
   - id: ConfigureCli
     name: Configure Jfrog Cli
     shell: bash
     run: |
        # Display Current JFrog Version
        jfrogversion=$(jfrog -v)
        IFS=' ' read -ra my_array <<< "$jfrogversion"
        echo "Using JFrog Version ${my_array[2]}"
        
        echo "USER ${{ inputs.user }}"
        echo "PW ${{ inputs.password }}"
        echo "URL ${{ inputs.url }}"
        
        # Configure JFrog Server
        jfrog config add --artifactory-url=${{ inputs.url }} --user=${{inputs.user }} --password=${{ inputs.password}}
        jfrog rt ping 
      
    #- run: echo Hello ${{ inputs.who-to-greet }}.
    #  shell: bash
    #- id: random-number-generator
    #  run: echo "::set-output name=random-id::$(echo $RANDOM)"
    #  shell: bash
    #- run: ${{ github.action_path }}/goodbye.sh
    #  shell: bash
